<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Schema Loader (Safe Debug)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body{font-family:system-ui,Segoe UI,Arial,sans-serif;margin:24px}
    input,button{font-size:14px;padding:8px}
    #log{white-space:pre-wrap;border:1px solid #ddd;padding:12px;border-radius:8px;margin-top:12px}
  </style>
</head>
<body>
  <h1>Schema Loader (Safe Debug)</h1>
  <p>Plak je API base URL (exact, inclusief https) en klik op een knop.</p>
  <input id="api" size="60" placeholder="https://document-generator-xhfr.onrender.com">
  <button id="btnHealth">Health</button>
  <button id="btnSchema">Load /schema</button>
  <div id="log"></div>

  <script>
    function log(msg){document.getElementById("log").textContent += msg + "\n";}
    function base(){var v=document.getElementById("api").value.trim(); if(v.endsWith("/")) v=v.slice(0,-1); return v;}
    async function fetchText(url, opts){const r=await fetch(url, opts||{}); const t=await r.text(); return {ok:r.ok, status:r.status, statusText:r.statusText, text:t};}

    document.getElementById("btnHealth").addEventListener("click", async function(){
      document.getElementById("log").textContent="";
      const url = base()+"/health";
      log("GET "+url);
      try{
        const res = await fetchText(url);
        log("Status: "+res.status+" "+res.statusText);
        log("Body:\n"+res.text);
      }catch(e){ log("Error: "+e.message); }
    });

    document.getElementById("btnSchema").addEventListener("click", async function(){
      document.getElementById("log").textContent="";
      const url = base()+"/schema";
      log("GET "+url);
      try{
        const r = await fetch(url);
        const info = "Status: "+r.status+" "+r.statusText;
        let body;
        try{ body = JSON.stringify(await r.json(), null, 2); }
        catch(_){ body = await r.text(); }
        log(info);
        log("Body:\n"+body);
      }catch(e){ log("Error: "+e.message); }
    });
  </script>
</body>
</html>
